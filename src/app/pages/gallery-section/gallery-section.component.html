<section id="galeria" class="galeria-section marble-bg" aria-labelledby="galeria-title">
  <div class="container">
    <header class="section-header text-center">
      <h2 id="galeria-title" class="section-title">ðŸ“¸ Antes y despuÃ©s</h2>
      <p class="section-subtitle">Algunos resultados de mis tratamientos.</p>
    </header>

    <!-- Feed tipo Instagram -->
    <div class="galeria-grid ig-feed" role="list">
      <article class="galeria-card" role="listitem" *ngFor="let item of items; let i = index">
        <h3 class="card-title">{{ item.titulo }}</h3>

        <!-- Foto combinada (arriba = Antes / abajo = DespuÃ©s) -->
        <figure class="combined-photo"
                (click)="abrirLightbox(i)"
                (keyup.enter)="abrirLightbox(i)"
                tabindex="0"
                [attr.aria-describedby]="item.descripcion ? ('caption-' + i) : null">
          <img [src]="item.src" [alt]="item.alt" loading="lazy" decoding="async" />

          <!-- overlays sutiles -->
          <span class="edge top" aria-hidden="true"></span>
          <span class="edge bottom" aria-hidden="true"></span>
          <figcaption class="badges" aria-hidden="true">
            <span class="badge badge-top">Antes</span>
            <span class="badge badge-bottom">DespuÃ©s</span>
          </figcaption>
        </figure>

        <p class="card-desc" *ngIf="item.descripcion" [attr.id]="'caption-' + i">
          {{ item.descripcion }}
        </p>

        <button class="btn-ver" type="button" (click)="abrirLightbox(i)">Ver en grande</button>
      </article>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" *ngIf="abierto" role="dialog" aria-modal="true" aria-label="Vista ampliada">
    <div class="lightbox-backdrop" (click)="cerrarLightbox()"></div>
    <div class="lightbox-content" role="document">
      <button class="lb-close" (click)="cerrarLightbox()" aria-label="Cerrar">âœ•</button>

      <div class="lb-header">
        <h3>{{ items[indexActual].titulo }}</h3>
      </div>

      <div class="lb-media">
        <img [src]="items[indexActual].src" [alt]="items[indexActual].alt" />
      </div>

      <div class="lb-nav">
        <button class="lb-prev" (click)="prev()" aria-label="Anterior">â€¹</button>
        <button class="lb-next" (click)="next()" aria-label="Siguiente">â€º</button>
      </div>
    </div>
  </div>
</section>
