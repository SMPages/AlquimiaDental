<section id="galeria" class="galeria-section marble-bg" aria-labelledby="galeria-title">
  <div class="container">
    <header class="section-header text-center">
      <h2 id="galeria-title" class="section-title">{{ 'gallery.title' | translate }}</h2>
      <p class="section-subtitle">{{ 'gallery.subtitle' | translate }}</p>
    </header>

    <div class="carousel"
         role="region"
         aria-roledescription="carousel"
         (mouseenter)="onMouseEnter()"
         (mouseleave)="onMouseLeave()"
         (touchstart)="onTouchStart($event)"
         (touchmove)="onTouchMove($event)"
         (touchend)="onTouchEnd()">

      <!-- Slides -->
      <div class="viewport">
        <div class="track" [style.--index]="current()">
          <article class="slide" *ngFor="let s of slides; let i = index" [attr.aria-hidden]="current() !== i">
            <img class="slide-img"
                 [src]="s.src"
                 [alt]="s.alt || (s.titleKey ? (s.titleKey | translate) : s.title) || 'Slide'"
                 loading="lazy"
                 decoding="async" />

            <div class="caption d-none-md">
              <h3 class="cap-title">
                {{ s.titleKey ? (s.titleKey | translate) : s.title }}
              </h3>
              <p class="cap-sub">
                {{ s.subtitleKey ? (s.subtitleKey | translate) : s.subtitle }}
              </p>
            </div>
          </article>
        </div>
      </div>

      <!-- Controles -->
      <button class="reel-nav left" type="button" aria-label="Anterior" (click)="prev()">‹</button>
      <button class="reel-nav right" type="button" aria-label="Siguiente" (click)="next()">›</button>

      <!-- Indicadores -->
      <div class="dots" role="tablist" aria-label="Diapositivas">
        <button
          *ngFor="let _ of slides; let i = index"
          class="dot"
          [class.active]="current() === i"
          role="tab"
          [attr.aria-selected]="current() === i"
          [attr.aria-controls]="'slide-' + i"
          (click)="go(i)"
          [attr.title]="(slides[i].titleKey ? (slides[i].titleKey | translate) : slides[i].title) || ('Slide ' + (i+1))">
        </button>
      </div>
    </div>

    <!-- CTA inferior opcional -->
       <div id="propuesta" class="propuesta-card fade-in">
          <p class="propuesta-text">
            <span class="marca">Alquimia Dental®</span> es la visión de la
            <strong>Dra. Sorany Díaz</strong>: un enfoque integral que combina estética,
            salud y una experiencia humana excepcional.
          </p>

          <a
            class="btn-hero primary"
            href="https://www.instagram.com/drsoranyporcelainsmile/"
            target="_blank"
            rel="noopener"
            aria-label="Ver más casos en Instagram"
          >
            <i class="bi bi-instagram" aria-hidden="true"></i>
            <span class="cta-text">
              {{ ('gallery.moreCta' | translate) || 'Ver más casos en Instagram' }}
            </span>
          </a>
        </div>
      
  </div>
</section>
